@model PhotoGallery.Application.DTOs.PagedResult<PhotoGallery.Application.DTOs.PhotoListItemDto>

<div class="d-flex flex-column align-items-center">

    @foreach (var photo in Model.Items)
    {
        <div class="photo-card mb-5">

            <!-- IMAGE -->
            <a asp-controller="Gallery"
               asp-action="Details"
               asp-route-id="@photo.Id">
                <img src="@photo.ThumbnailUrl"
                     class="photo-image"
                     alt="@photo.Description" />
            </a>

            <!-- TITLE -->
            <h5 class="mt-3 mb-1 text-center">
                @photo.Description
            </h5>

            <!-- HASHTAGS -->
            @if (photo.Hashtags.Any())
            {
                <div class="text-center text-muted mb-2">
                    @foreach (var tag in photo.Hashtags)
                    {
                        <span class="badge bg-secondary me-1 mb-1">#@tag</span>
                    }
                </div>
            }

            <!-- FOOTER -->
            <div class="photo-meta d-flex justify-content-between">
                <small>@photo.AuthorEmail</small>
                <small>@photo.UploadedAt.ToString("dd.MM.yyyy HH:mm")</small>
            </div>

        </div>
    }

</div>

@if (Model.TotalPages > 1)
{
    <!-- RIGHT SIDE (DESKTOP) -->
    <div class="page-rail d-none d-md-flex">
        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <a asp-action="Index"
               asp-route-page="@i"
               class="page-rail-item @(i == Model.Page ? "active" : "")">
                @i
            </a>
        }
    </div>

    <!-- BOTTOM (MOBILE) -->
    <nav class="d-md-none mt-4">
        <ul class="pagination justify-content-center">
            @for (int i = 1; i <= Model.TotalPages; i++)
            {
                <li class="page-item @(i == Model.Page ? "active" : "")">
                    <a class="page-link"
                       asp-action="Index"
                       asp-route-page="@i">
                        @i
                    </a>
                </li>
            }
        </ul>
    </nav>
}


<style>
    .page-rail {
        position: fixed;
        right: 24px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        flex-direction: column;
        gap: 8px;
        z-index: 100;
    }

    .page-rail-item {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 1px solid #dee2e6;
        text-align: center;
        line-height: 34px;
        text-decoration: none;
        color: #495057;
        background-color: white;
        font-size: 14px;
        transition: all 0.2s ease;
    }

    .page-rail-item:hover {
        background-color: #f1f3f5;
    }

    .page-rail-item.active {
        background-color: var(--pg-primary);
        color: white;
        border-color: var(--pg-primary);
        font-weight: 600;
    }

</style>
